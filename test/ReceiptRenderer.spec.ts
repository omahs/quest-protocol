import {expect} from 'chai'
import { Contract } from 'ethers';
import {ethers, upgrades} from 'hardhat'

describe('ReceiptRenderer Contract', async () => {
  let ReceiptRenderer: Contract,
  deployedReceiptRenderer: Contract

  const wrappedEthAddress = "0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2"
  const tokenId = 100
  const questId = "questid123"
  const totalParticipants = 500
  const claimed = true
  const rewardAmount = ethers.BigNumber.from("100000000000000000")

  beforeEach(async () => {
    ReceiptRenderer = await ethers.getContractFactory('ReceiptRenderer')

    deployedReceiptRenderer = await ReceiptRenderer.deploy()
    await deployedReceiptRenderer.deployed()
  })

  describe('humanRewardAmount', () => {
    it('generates the reward amount and symbol text', async () => {
      let rewardAmountText = await deployedReceiptRenderer.humanRewardAmount(ethers.BigNumber.from("100000000000000000"), wrappedEthAddress);
      expect(rewardAmountText).to.equal("0.1")
    })
  })

  describe('symbolForAddress', () => {
    it('generates the correct symbol for the address', async () => {
      let symbol = await deployedReceiptRenderer.symbolForAddress(wrappedEthAddress);
      expect(symbol).to.equal("WETH")
    })
  })

  describe('generateTokenURI', () => {
    it('has the correct metadata', async () => {
      let base64encoded = await deployedReceiptRenderer.generateTokenURI(tokenId, questId, totalParticipants, claimed, rewardAmount, wrappedEthAddress);

      let buff = Buffer.from(base64encoded.replace("data:application/json;base64,", ""), 'base64');
      let metadata = buff.toString('ascii');

      let expectedMetada = {
        "name": "RabbitHole.gg Receipt #100",
        "description": "RabbitHole.gg Receipts are used to claim rewards from completed quests.",
        "image": "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iNjIzIiBoZWlnaHQ9Ijg0OCIgeG1sbnM6dj0iaHR0cHM6Ly92ZWN0YS5pby9uYW5vIj48ZGVmcz48cmFkaWFsR3JhZGllbnQgaWQ9IkEiIGN4PSIxOC4wMyIgY3k9Ii0yMy44NSIgcj0iMSIgZ3JhZGllbnRUcmFuc2Zvcm09Im1hdHJpeCgtNzc4LjQ0IDAgMCAtNzU1LjU5IDE0MzQxLjkyIC0xNzY1NS4yNCkiIHhsaW5rOmhyZWY9IiNHIj48c3RvcCBvZmZzZXQ9Ii4wMSIgc3RvcC1jb2xvcj0iI2RlODBmZiIgc3RvcC1vcGFjaXR5PSIuMzkiLz48c3RvcCBvZmZzZXQ9Ii4xNCIgc3RvcC1jb2xvcj0iI2VjN2JmZiIgc3RvcC1vcGFjaXR5PSIuMjIiLz48c3RvcCBvZmZzZXQ9Ii4yNyIgc3RvcC1jb2xvcj0iI2YyNWFmZiIgc3RvcC1vcGFjaXR5PSIuNDgiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiMxYzIzMWIiIHN0b3Atb3BhY2l0eT0iMCIvPjwvcmFkaWFsR3JhZGllbnQ+PHJhZGlhbEdyYWRpZW50IGlkPSJCIiBjeD0iMTcuOTEiIGN5PSItMjMuODYiIHI9IjEiIGdyYWRpZW50VHJhbnNmb3JtPSJtYXRyaXgoOCwzMzMsLTU3OS41OSwxMy45MiwtMTM2NjkuMDUsLTU1ODEuMDQpIiB4bGluazpocmVmPSIjRyI+PHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjOGYwMGZmIiBzdG9wLW9wYWNpdHk9Ii41MSIvPjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzFjMjMxYiIgc3RvcC1vcGFjaXR5PSIwIi8+PC9yYWRpYWxHcmFkaWVudD48cmFkaWFsR3JhZGllbnQgaWQ9IkMiIGN4PSIxOC4wOSIgY3k9Ii0yMy45MSIgcj0iMSIgZ3JhZGllbnRUcmFuc2Zvcm09Im1hdHJpeCgwLC0zNDUsODc3Ljc3LDAsMjEzMDUuMjcsNzA0NS41KSIgeGxpbms6aHJlZj0iI0ciPjxzdG9wIG9mZnNldD0iMCIgc3RvcC1jb2xvcj0iI2MxM2ZmZiIvPjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzFjMjMxYiIgc3RvcC1vcGFjaXR5PSIwIi8+PC9yYWRpYWxHcmFkaWVudD48cmFkaWFsR3JhZGllbnQgaWQ9IkQiIGN4PSIxNy45MyIgY3k9Ii0yMy45MSIgcj0iMSIgZ3JhZGllbnRUcmFuc2Zvcm09Im1hdHJpeCgyNjgsLTIsOC41NywxMTQ4LjY1LC00NTQ4Ljk5LDI3ODc5LjYpIiB4bGluazpocmVmPSIjRyI+PHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjYjk0NmZmIi8+PHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjMWMyMzFiIiBzdG9wLW9wYWNpdHk9IjAiLz48L3JhZGlhbEdyYWRpZW50PjxyYWRpYWxHcmFkaWVudCBpZD0iRSIgY3g9IjE4LjA3IiBjeT0iLTIzLjg3IiByPSIxIiBncmFkaWVudFRyYW5zZm9ybT0ibWF0cml4KC0yNDIsMCwwLC0xMjc3LjQzLDQ5MzQuNSwtMzAxMTUuODYpIiB4bGluazpocmVmPSIjRyI+PHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjZGQwZmZmIiBzdG9wLW9wYWNpdHk9Ii45MSIvPjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzFjMjMxYiIgc3RvcC1vcGFjaXR5PSIwIi8+PC9yYWRpYWxHcmFkaWVudD48cGF0aCBpZD0iRiIgZD0iTTM5OS42IDY2SDIyNS40QTIyIDIyIDAgMCAxIDIwNCA4M2gtMzlhMjIgMjIgMCAwIDEtMjEuNC0xN2gtNDRMNjYgOTkuNlY3ODFoNDUzLjVsMzYuNS0zNi41di02NDFMNTE4LjUgNjZoLTM3LjFBMjIgMjIgMCAwIDEgNDYwIDgzaC0zOWEyMiAyMiAwIDAgMS0yMS40LTE3WiIvPjxsaW5lYXJHcmFkaWVudCBpZD0iRyIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiLz48L2RlZnM+PHBhdGggZD0iTS41LjVoNjIydjg0N0guNXoiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIi8+PGcgZmlsbC1ydWxlPSJldmVub2RkIj48cGF0aCBkPSJNNDAwIDY2LjVIMjI1LjhhMjIgMjIgMCAwIDEtMjEuNCAxN2gtMzlhMjIgMjIgMCAwIDEtMjEuNC0xN2gtNDRsLTMzLjYgMzMuNnY2ODEuNGg0NTMuNWwzNi41LTM2LjVWMTA0bC0zNy41LTM3LjVoLTM3LjFhMjIgMjIgMCAwIDEtMjEuNCAxN2gtMzlhMjIgMjIgMCAwIDEtMjEuNC0xN3oiIGZpbGw9IiMwYzBiMGYiIGZpbGwtb3BhY2l0eT0iLjI2Ii8+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLjQgLjUpIj48dXNlIHhsaW5rOmhyZWY9IiNGIiBmaWxsLW9wYWNpdHk9Ii45OSIgZmlsbD0idXJsKCNBKSIvPjx1c2UgeGxpbms6aHJlZj0iI0YiIGZpbGwtb3BhY2l0eT0iLjUiIGZpbGw9InVybCgjQikiLz48dXNlIHhsaW5rOmhyZWY9IiNGIiBmaWxsLW9wYWNpdHk9Ii41IiBmaWxsPSJ1cmwoI0MpIi8+PHVzZSB4bGluazpocmVmPSIjRiIgZmlsbC1vcGFjaXR5PSIuNSIgZmlsbD0idXJsKCNEKSIvPjx1c2UgeGxpbms6aHJlZj0iI0YiIGZpbGwtb3BhY2l0eT0iLjUiIGZpbGw9InVybCgjRSkiLz48L2c+PC9nPjxnIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2FkODZmZiIgc3Ryb2tlLXdpZHRoPSIyIj48cGF0aCBkPSJNMjA0LjQgODQuNWEyMyAyMyAwIDAgMCAyMi4yLTE3aDE3Mi42YTIzIDIzIDAgMCAwIDIyLjIgMTdoMzlhMjMgMjMgMCAwIDAgMjIuMi0xN2gzNS45bDM2LjkgMzYuOXY2NDAuMmwtMzUuOSAzNS45SDY3LjR2LTY4MGwzMy0zM2g0Mi44YTIzIDIzIDAgMCAwIDIyLjIgMTd6Ii8+PHBhdGggZD0iTTMxMS45IDMwNS4zVjY4LjVtLTcuNSAyMzYuM1Y4Ni4ybC0xOC41LTE4LjdtMzMuNSAyMzcuM1Y4Ni4ybDE4LjUtMTguN00yOTcuNCAzMDVWODkuN2wtMjItMjIuMm01MiAyMzcuM3YtMjE1bDIyLTIyLjNtLTM2LjUgMzMxLjd2MTcwLjZtNy41LTE3MC42djE1Mi45bDE4LjUgMTguN20tMzMuNS0xNzEuNnYxNTIuOWwtMTguNSAxOC43bTQwLjUtMTcxLjN2MTQ5bDIyIDIyLjJtLTUyLTE3MS43djE0OS41bC0yMiAyMi4yTTIwOC45IDYwMmMwLTE3LjM5NyAxNC4xMDMtMzEuNSAzMS41LTMxLjVoMTQwYzE3LjM5NyAwIDMxLjUgMTQuMTAzIDMxLjUgMzEuNXMtMTQuMTAzIDMxLjUtMzEuNSAzMS41aC0xNDBjLTE3LjM5NyAwLTMxLjUtMTQuMTAzLTMxLjUtMzEuNXptMjc2LjgtMjYwLjd2MTJtMCAwdjEybTAtMTJoLTEybTEyIDBoMTJtLTEyIDdhNyA3IDAgMSAxIDAtMTQgNyA3IDAgMSAxIDAgMTR6bS0zNTMtMTl2MTJtMCAwdjEybTAtMTJoLTEybTEyIDBoMTJtLTEyIDdhNyA3IDAgMSAxIDAtMTQgNyA3IDAgMSAxIDAgMTR6bTM1MyAyMzd2MTJtMCAwdjEybTAtMTJoLTEybTEyIDBoMTJtLTEyIDdhNyA3IDAgMSAxIDAtMTQgNyA3IDAgMSAxIDAgMTR6bS0zNTMtMTl2MTJtMCAwdjEybTAtMTJoLTEybTEyIDBoMTJtLTEyIDdhNyA3IDAgMSAxIDAtMTQgNyA3IDAgMSAxIDAgMTR6Ii8+PC9nPjxwYXRoIGQ9Ik0yNDIuNyA3MTQuNXYyMWg0di05LjFoMy42YzEuMyAwIDEuOSAxLjMgMS45IDR2NS4xaDMuOXYtNi42YTMuNyAzLjcgMCAwIDAtMi44LTRjMi0uOCAyLjctMi41IDIuNy00LjYgMC00LjEtMS41LTUuOC00LjctNS44em00IDIuNmgzLjdjMS4yIDAgMS45IDEuMyAxLjkgMy40cy0uNyAzLjMtMS45IDMuM2gtMy43em0xNC0yLjZ2MjFoMTIuOHYtMi42aC04Ljd2LTYuN2g2LjR2LTIuNWgtNi40di02LjZoOC43di0yLjZ6bTE3LjQgMHYyMWg5LjVjMi40IDAgMy45LTIuNSAzLjktNS43di05LjVjMC0zLjMtMS42LTUuOC0zLjktNS44em00LjEgMi42aDMuN2MxLjEgMCAxLjggMS41IDEuOCAzLjJ2OS41YzAgMS42LS43IDMuMS0xLjggMy4xaC0zLjd6bTEzLjktMi42djIxSDMwOXYtMi42aC04Ljh2LTYuN2g2LjR2LTIuNWgtNi40di02LjZoOC44di0yLjZ6bTE3LjcgMHYyMWgxMi45di0yLjZoLTguOHYtNi43aDYuNHYtMi41aC02LjR2LTYuNmg4Ljh2LTIuNnptMTcuNCAwdjIxaDN2LTEzLjJsMi4xIDEzLjJoMy4ybDIuMy0xMy4zdjEzLjNoMi45di0yMWgtNGwtMi43IDE2LTIuOC0xNnptMTggMHYyMWgxMi45di0yLjZoLTguOHYtNi43aDYuNHYtMi41aC02LjR2LTYuNmg4Ljh2LTIuNnptMTcuNSAwdjIxaDkuNGMyLjQgMCA0LTIuNSA0LTUuN3YtOS41YzAtMy4zLTEuNi01LjgtNC01Ljh6bTQgMi42aDMuN2MxLjIgMCAxLjkgMS41IDEuOSAzLjJ2OS41YzAgMS42LS43IDMuMS0xLjkgMy4xaC0zLjd6TTI0NS41IDYwNC43djcuNWgtMy42di0yMC4xaDguM2E4LjY3IDguNjcgMCAwIDEgNS40IDEuNiA2LjExIDYuMTEgMCAwIDEgMS44IDQuNyA1LjcgNS43IDAgMCAxLTQuMSA1LjdsNC45IDguMWgtNGwtNC40LTcuNXptMC05LjZ2Ni42aDQuM2E0LjYgNC42IDAgMCAwIDMuMS0uOCAzLjU5IDMuNTkgMCAwIDAgMC01IDQuNiA0LjYgMCAwIDAtMy4xLS44em0yNi42IDE3LjFoLTMuNGMwLS40LS4xLS44LS4xLTEuMmEzLjcgMy43IDAgMCAxLS4xLTEuMSAzLjg5IDMuODkgMCAwIDEtMS43IDEuOSA2LjEyIDYuMTIgMCAwIDEtMi45LjcgNC41MSA0LjUxIDAgMCAxLTMuMy0xLjIgMy41IDMuNSAwIDAgMS0xLjMtMyAzLjcgMy43IDAgMCAxIDEuMi0yLjkgNi42NSA2LjY1IDAgMCAxIDMuOC0xLjRsNC4xLS41di0uN2EyLjQ5IDIuNDkgMCAwIDAtLjctMS45IDIuNzIgMi43MiAwIDAgMC0xLjktLjcgMi4zNyAyLjM3IDAgMCAwLTEuOC42IDIuMyAyLjMgMCAwIDAtLjggMS42aC0zLjNhNC40OSA0LjQ5IDAgMCAxIDEuOC0zLjUgNi4zNSA2LjM1IDAgMCAxIDQuMi0xLjMgNiA2IDAgMCAxIDQuNCAxLjQgNS4yOSA1LjI5IDAgMCAxIDEuNSA0LjF2Ny41em0tOS40LTQuMWExLjcgMS43IDAgMCAwIC42IDEuNCAyLjUgMi41IDAgMCAwIDEuNi41IDMuNjggMy42OCAwIDAgMCAyLjUtLjkgMy4yMiAzLjIyIDAgMCAwIDEtMi41di0uOGwtMy4xLjNhNS4wOSA1LjA5IDAgMCAwLTIgLjcgMS40OSAxLjQ5IDAgMCAwLS42IDEuM3ptMjAuMiA0LjRhNS4yMSA1LjIxIDAgMCAxLTIuNy0uNyA0LjQxIDQuNDEgMCAwIDEtMS43LTEuOXYyLjNoLTMuNHYtMjAuN2gzLjV2OC43YTMuODkgMy44OSAwIDAgMSAxLjctMS45IDQuNTkgNC41OSAwIDAgMSAyLjYtLjcgNS42MSA1LjYxIDAgMCAxIDQuNCAyIDkuNDIgOS40MiAwIDAgMSAwIDEwLjggNS40IDUuNCAwIDAgMS00LjQgMi4xem0tMS0xMi4zYTMgMyAwIDAgMC0yLjUgMS4yIDUuNjggNS42OCAwIDAgMC0uOSAzLjR2LjVhNS45MiA1LjkyIDAgMCAwIC45IDMuNCAzIDMgMCAwIDAgMi41IDEuMiAzLjM5IDMuMzkgMCAwIDAgMi43LTEuMyA2LjQgNi40IDAgMCAwIC45LTMuNiA2LjA4IDYuMDggMCAwIDAtLjktMy41IDMuMSAzLjEgMCAwIDAtMi43LTEuM3ptMTcuNCAxMi4zYTUgNSAwIDAgMS0yLjctLjcgNC40MSA0LjQxIDAgMCAxLTEuNy0xLjl2Mi4zaC0zLjR2LTIwLjdoMy41djguN2EzLjg5IDMuODkgMCAwIDEgMS43LTEuOSA0LjU5IDQuNTkgMCAwIDEgMi42LS43IDUuNjEgNS42MSAwIDAgMSA0LjQgMiA5LjQyIDkuNDIgMCAwIDEgMCAxMC44IDUuNCA1LjQgMCAwIDEtNC40IDIuMXptLTEtMTIuM2EzIDMgMCAwIDAtMi41IDEuMiA1LjY4IDUuNjggMCAwIDAtLjkgMy40di41YTUuOTIgNS45MiAwIDAgMCAuOSAzLjQgMyAzIDAgMCAwIDIuNSAxLjIgMy41IDMuNSAwIDAgMCAyLjctMS4zIDYuNCA2LjQgMCAwIDAgLjktMy42IDYuMDggNi4wOCAwIDAgMC0uOS0zLjUgMy4yMSAzLjIxIDAgMCAwLTIuNy0xLjN6bTEzLjItNC43aC0zLjdWNTkyaDMuN3ptLS4yIDE2LjdoLTMuNHYtMTQuM2gzLjR6bTktMi43aC45bC45LS4ydjIuOGwtMS40LjNoLTEuNGE0LjQxIDQuNDEgMCAwIDEtMy4yLTEgNC4yMSA0LjIxIDAgMCAxLTEuMS0zLjF2LTcuOGgtMS45di0yLjZoMS45di0zLjZoMy41djMuNmgzLjN2Mi42aC0zLjN2Ny4yYTIgMiAwIDAgMCAuNCAxLjQgMS44MiAxLjgyIDAgMCAwIDEuNC40em03LjkgMi43aC0zLjZ2LTIwLjFoMy42djguNGgxMHYtOC40aDMuNXYyMC4xaC0zLjV2LTguN2gtMTB6bTIzLjEtMTQuNmE2LjQ4IDYuNDggMCAwIDEgNSAyIDguNzcgOC43NyAwIDAgMSAwIDEwLjkgNi42OSA2LjY5IDAgMCAxLTUgMiA2Ljg5IDYuODkgMCAwIDEtNS4xLTIgOC43NyA4Ljc3IDAgMCAxIDAtMTAuOSA2LjYzIDYuNjMgMCAwIDEgNS4xLTJ6bTAgMi42YTMuMjIgMy4yMiAwIDAgMC0yLjYgMS4zIDUuNzcgNS43NyAwIDAgMC0uOSAzLjUgNi40IDYuNCAwIDAgMCAuOSAzLjYgMy4xIDMuMSAwIDAgMCAyLjYgMS4yIDIuOSAyLjkgMCAwIDAgMi41LTEuMiA1LjY4IDUuNjggMCAwIDAgMS0zLjYgNS40IDUuNCAwIDAgMC0xLTMuNSAzIDMgMCAwIDAtMi41LTEuM3ptMTIuOS04Ljd2MjAuN2gtMy41di0yMC43em0xMi41IDE2LjJoMy4yYTUuMTkgNS4xOSAwIDAgMS0yLjIgMy41IDYuMDcgNi4wNyAwIDAgMS00LjEgMS4zIDYuODggNi44OCAwIDAgMS01LTIgOC43NyA4Ljc3IDAgMCAxIDAtMTAuOSA2LjY5IDYuNjkgMCAwIDEgNS0yIDUuNDkgNS40OSAwIDAgMSA0LjYgMiA3LjI5IDcuMjkgMCAwIDEgMS43IDUuMnYxLjFIMzcwYTQuNjIgNC42MiAwIDAgMCAxLjEgMi45IDMuMzIgMy4zMiAwIDAgMCAyLjUgMS4xIDIuOSAyLjkgMCAwIDAgMS45LS42IDMuNDEgMy40MSAwIDAgMCAxLjItMS42em0tMy4xLTcuNWEzIDMgMCAwIDAtMi4zLjkgNC41NSA0LjU1IDAgMCAwLTEuMiAyLjVoNi41YTMuNjEgMy42MSAwIDAgMC0uOC0yLjQgMi43IDIuNyAwIDAgMC0yLjItMXptMTIxLjEtNDMxLjZjMTIuNTY1LTQuOTA0IDIwLjEzNi0xNy43NzUgMTguMzE3LTMxLjE0cy0xMi41NTUtMjMuNzQ0LTI1Ljk3My0yNS4xMTItMjYuMDI3IDYuNjM0LTMwLjUwNCAxOS4zNTcuMzQzIDI2Ljg1NyAxMS42NjEgMzQuMTk0YTMuMiAzLjIgMCAwIDEgMi44LTEuN2MuMiAwIC41LS4zLjQtLjVhMjEuNDcgMjEuNDcgMCAwIDEtLjctNS4xYzAtMTAuNyA4LjEtMTkuMyAxOC4xLTE5LjNhMS45MiAxLjkyIDAgMCAwIDEuNi0xLjF2LS4yYTIuNiAyLjYgMCAwIDAtMS42LTMuMyAxOC45MSAxOC45MSAwIDAgMS0xMy43LTE0LjEuODEuODEgMCAwIDEgMS40LS44bDI2LjQgMjAuMWExLjA4IDEuMDggMCAwIDEgLjQuOSAxOC4yNSAxOC4yNSAwIDAgMCAuMSA3LjEuNzkuNzkgMCAwIDEtLjMuOSA4LjEgOC4xIDAgMCAxLTguNi41IDEuMzggMS4zOCAwIDAgMC0xLjEtLjIgMS41MSAxLjUxIDAgMCAwLTEuMSAxLjR2MTIuMmEuOS45IDAgMCAxLS45LjloLTEuNmEuOS45IDAgMCAxLS45LS45IDguNCA4LjQgMCAwIDAtOC4xLTcuNGgtLjhhLjYuNiAwIDEgMCAuMSAxLjIgNy4zIDcuMyAwIDAgMSA2IDcuMyA3LjUyIDcuNTIgMCAwIDEtLjIgMS41LjkuOSAwIDAgMCAuNjggMS4wOGg3LjAyYTEuMjEgMS4yMSAwIDAgMSAuNS41IDIuNTggMi41OCAwIDAgMSAuNiAxLjcyek00NjcuMyAxMzdhLjYuNiAwIDAgMSAuNC0xLjFoMTYuNmMuMzA0LS4xMzguNjYyLS4wMDQuOC4zcy4wMDQuNjYyLS4zLjhhMTQuNTYgMTQuNTYgMCAwIDEtOC44IDMuMSAxNCAxNCAwIDAgMS04LjctMy4xem0zMS41IDUuM2ExLjYgMS42IDAgMCAxLTMuMTk3LS4xMzEgMS42IDEuNiAwIDAgMSAxLjU5Ny0xLjU2OSAxLjcgMS43IDAgMCAxIDEuNiAxLjd6IiBmaWxsPSIjZGFlMGZmIi8+PHRleHQgYWxpZ25tZW50LWJhc2VsaW5lPSJtaWRkbGUiIHRleHQtYW5jaG9yPSJtaWRkbGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDMxMSAzNzAuOSkiIGZvbnQtc2l6ZT0iNDQiIGZpbGw9IiNmZmYiIGZvbnQtZmFtaWx5PSJBcmlhbE1ULCBBcmlhbCI+MC4xIFdFVEg8L3RleHQ+PC9zdmc+",
        "attributes":
        [
          {
            "trait_type": "Quest ID",
            "value": questId.toString()
          },
          {
            "trait_type": "Token ID",
            "value": tokenId.toString()
          },
          {
            "trait_type": "Total Participants",
            "value": totalParticipants.toString()
          },
          {
            "trait_type": "Claimed",
            "value": claimed.toString()
          },
          {
            "trait_type": "Reward Amount",
            "value": "0.1"
          },
          {
            "trait_type": "Reward Address",
            "value": wrappedEthAddress.toString().toLowerCase()
          }
        ]
      }

      expect(JSON.parse(metadata)).to.eql(expectedMetada);
    })
  })
})
